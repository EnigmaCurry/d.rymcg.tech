#! Add the standard traefik labels to all your services:
#! This creates the router, and applies the standard HTTP authentication and IP filtering middlewares:
#! basic_traefik_config args takes the NAMES of the environment variables to reference, not the values themselves.
services:
  api: #@ basic_traefik_config(service="api", traefik_host_var="${CREATE_TEMPLATE_PROJECT_NAME_UPPERCASE}_TRAEFIK_HOST", ip_sourcerange_var="${CREATE_TEMPLATE_PROJECT_NAME_UPPERCASE}_IP_SOURCERANGE", http_auth_var="${CREATE_TEMPLATE_PROJECT_NAME_UPPERCASE}_HTTP_AUTH", port=None)
volumes: {}
---
#@overlay/match by=overlay.all, expects=1
---
#! Add all custom config here:
services:
  #@overlay/match-child-defaults missing_ok=True
  api:
    #@ if development_mode:
    command:
      - --reload
    volumes:
      - development:/code
    #@ end
    labels:
      - "additional custom label - ignore this - example only"

#@overlay/match-child-defaults missing_ok=True
volumes:
  #@ if development_mode:
  development:
  #@ end
