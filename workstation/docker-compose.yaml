version: "3.9"

volumes:
  workstation-home:

services:
  workstation:
    build:
      context: src
    ## !! Extra volumes are defined in docker_compose.instance.yaml !!
    volumes:
      - workstation-home:/home
      - /var/run/docker.sock:/var/run/docker.sock:ro
    ## !! Extra ports are defined in docker_compose.instance.yaml !!
    ports: []
    restart: unless-stopped
    container_name: workstation-${WORKSTATION_DOCKER_CONTEXT}-${INSTANCE:-default}
    hostname: workstation-${WORKSTATION_DOCKER_CONTEXT}-${INSTANCE:-default}
    environment:
      - WORKSTATION_UID
      - WORKSTATION_GID
      - WORKSTATION_USER
      - WORKSTATION_DOCKER_CONTEXT
      - WORKSTATION_SSH_PORT
    labels: []
