version: "3.9"

services:
  mumble:
    build:
      context: mumble-server
      args:
        MUMBLE_VERSION: "${MUMBLE_VERSION}"
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    sysctls:
      - net.ipv4.ip_unprivileged_port_start=1024
    restart: unless-stopped
    environment:
      - MUMBLE_VERBOSE
      - MUMBLE_SUPERUSER_PASSWORD
      - MUMBLE_CONFIG_WELCOME_TEXT
      - MUMBLE_CONFIG_CERT_REQUIRED
      - MUMBLE_CONFIG_DEFAULT_CHANNEL
      - MUMBLE_CONFIG_REMBMER_CHANNEL
      - MUMBLE_CONFIG_REMEMBER_CHANNEL_DURATION
    # All labels are defined in the template: docker-compose.instance.yaml
    # The labels will merge together here from the template output:
    #   docker-compose.override_{DOCKER_CONTEXT}_{INSTANCE}.yaml
    labels: []
