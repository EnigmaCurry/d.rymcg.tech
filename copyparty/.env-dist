# The Docker image to use.
# https://hub.docker.com/r/copyparty/ac/tags
# https://github.com/9001/copyparty/tree/hovudstraum/scripts/docker#editions
COPYPARTY_IMAGE=copyparty/ac:1.20.4

# The domain name for the copyparty service:
COPYPARTY_TRAEFIK_HOST=copyparty.example.com

# The name of this instance. If there is only one instance, use 'default'.
COPYPARTY_INSTANCE=
# You can protect this instance from uninstallation by setting this true:
## If true, make this instance immune to: `make uninstall`, `make destroy`
## Still allowed regardless: `make install`, `make stop`, `make start`, `make restart`
COPYPARTY_INSTANCE_PROTECTION=false

# Filter access by IP address source range (CIDR):
##Disallow all access: 0.0.0.0/32
##Allow all access: 0.0.0.0/0
COPYPARTY_IP_SOURCERANGE=0.0.0.0/0

# Set the UID and GID for the container's 'copyparty' user that runs the main process.
# All of your *internal* volumes will be created with the ownership of this user.
# All of your *external* volumes will need to be made accessible by this user.

COPYPARTY_UID=10123
COPYPARTY_GID=10123

# HTTP Basic Authentication:
# Use `make config` to fill this in properly, or set this to blank to disable.
COPYPARTY_HTTP_AUTH=

# OAUTH2
# Set to `true` to use OpenID/OAuth2 authentication via the
# traefik-forward-auth service in d.rymcg.tech.
# Using OpenID/OAuth2 will require login to access your app,
# but it will not affect what a successfully logged-in person can do in your
# app. If your app has built-in authentication and can check the user
# header that traefik-forward-auth sends, then your app can limit what the
# logged-in person can do in the app. But if your app can't check the user
# header, or if your app doesn't have built-in authentication at all, then
# any person with an account on your Forgejo server can log into your app and
# have full access.
COPYPARTY_OAUTH2=false
# In addition to Oauth2 authentication, you can configure basic authorization
# by entering which authorization group can log into your app. You create
# groups of email addresses in the `traefik` folder by running `make groups`.
COPYPARTY_OAUTH2_AUTHORIZED_GROUP=

# Mutual TLS (mTLS):
# Set true or false. If true, all clients must present a certificate signed by Step-CA:
COPYPARTY_MTLS_AUTH=false
# Enter a comma separated list of client domains allowed to connect via mTLS.
# Wildcards are allowed and encouraged on a per-app basis:
COPYPARTY_MTLS_AUTHORIZED_CERTS=*.clients.copyparty.example.com

## Set the Copyparty Edition you want to build an image for:
##    min (57 MiB, 20 gz) is just copyparty itself
##    im (70 MiB, 25 gz) can thumbnail images with pillow, parse media files with mutagen
##    ac (163 MiB, 56 gz) is im plus ffmpeg for video/audio thumbs + audio transcoding + better tags
##    iv (211 MiB, 73 gz) is ac plus vips for faster heif / avic / jxl thumbnails
##    dj (309 MiB, 104 gz) is iv plus beatroot/keyfinder to detect musical keys and bpm
## ac is recommended since the additional features available in iv and dj are rarely useful
COPYPARTY_EDITION=ac

COPYPARTY_ADMIN_USER=admin
COPYPARTY_ADMIN_PASSWORD=
COPYPARTY_ENABLE_STATS=true
COPYPARTY_DISABLE_DUPE=true
COPYPARTY_NO_ROBOTS=true
COPYPARTY_FORCE_JS=true

## Set additional user accounts
## COPYPARTY_USERS is a comma separated string of user:pass tuples
## Example: COPYPARTY_USERS="mike:supersecret,ryan:hunter2"
COPYPARTY_USERS=

## Set external volumes to mount
## COPYPARTY_VOL_EXTERNAL is a comma separated string of mount_name:host_path tuples
## Example: COPYPARTY_VOL_EXTERNAL=ryan-music:/storage/music,bob-pics:/var/media/bob/pics
## Each volume will be mounted under /mnt/{mount_name} inside the container.
COPYPARTY_VOL_EXTERNAL=

## Set external volume permissions
## COPYPARTY_VOL_PERMISSIONS is a comma separated string of mount_name:permission:user_list
## mount_name is the name of the directory mounted under /mnt
## permission is the text representation of the copyparty permission, e.g. 'r', 'rw', 'rwmda'.
## user_list is / (forward slash) delimited list of usernames with that permission for that mount.
## Mounts may be specified multiple times various permissions and users.
## Example: COPYPARTY_VOL_PERMISSIONS=ryan-music:rw:ryan/erin,bob-pics:rw:bob,bob-pics:r:ryan
COPYPARTY_VOL_PERMISSIONS=

## Allow unauthenticated public access to read only from /public volume?
COPYPARTY_ENABLE_PUBLIC_ACCESS=true

## Allow unauthenticated guest access to upload only to /guests volume?
COPYPARTY_ENABLE_GUEST_ACCESS=false

## Labels to configure Homepage
## See https://github.com/EnigmaCurry/d.rymcg.tech/tree/master/homepage#homepage
COPYPARTY_HOMEPAGE_LABELS_ENABLE=true
COPYPARTY_HOMEPAGE_GROUP_COPYPARTY=Storage
COPYPARTY_HOMEPAGE_NAME_COPYPARTY=Copyparty
COPYPARTY_HOMEPAGE_ICON_COPYPARTY=copyparty
COPYPARTY_HOMEPAGE_DESCRIPTION_COPYPARTY=
COPYPARTY_HOMEPAGE_SHOW_STATS_COPYPARTY=true

# META:
# PREFIX=COPYPARTY
