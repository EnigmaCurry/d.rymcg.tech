
services:
  pairdrop:
    build:
      context: pairdrop
      args:
        PAIRDROP_IMAGE: ${PAIRDROP_IMAGE}
    security_opt:
      - no-new-privileges:true
    # cap_drop:
    #   - ALL
    sysctls:
      - net.ipv4.ip_unprivileged_port_start=1024
    restart: unless-stopped
    environment:
      - PUID=${PAIRDROP_UID}
      - PGID=${PAIRDROP_GID}
      - TZ=Etc/UTC
      - RATE_LIMIT=false
      - WS_FALLBACK=false
      - DEBUG_MODE=${PAIRDROP_DEBUG_MODE}
      - TURN_DOMAIN=${PAIRDROP_TURN_DOMAIN}
      - TURN_LISTEN_PORT=${PAIRDROP_TURN_LISTEN_PORT}
      - TURN_TLS_PORT=${PAIRDROP_TURN_TLS_PORT}
      - TURN_USERNAME=${PAIRDROP_TURN_USERNAME}
      - TURN_PASSWORD=${PAIRDROP_TURN_PASSWORD}
      - COTURN_STATIC_AUTH_SECRET=${PAIRDROP_COTURN_STATIC_AUTH_SECRET}
      - RESTART_MINUTES=${PAIRDROP_RESTART_MINUTES}
    # All labels are defined in the template: docker-compose.instance.yaml
    # The labels will merge together here from the template output:
    #   docker-compose.override_{DOCKER_CONTEXT}_{INSTANCE}.yaml
    labels: []
